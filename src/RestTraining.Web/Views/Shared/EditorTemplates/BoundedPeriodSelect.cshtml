@model int
@using RestTraining.Api.DTO

@{
    Layout = null;
    var periods = (List<BoundedPeriodDTO>)ViewData["periods"];
    var inputFieldName = ViewData.ModelMetadata.PropertyName;
}

<script type="text/javascript">
    $(document).ready(function () {
        $('#reportrange').daterangepicker(
           {
               ranges: {

                       @foreach (var period in periods)
                       {
                           var str = string.Format("'{0}-{1}' : [Date.parse('{0}'), Date.parse('{1}'), {2}],\n", period.BeginDate.ToString("MM/dd/yyyy"), period.EndDate.ToString("MM/dd/yyyy"), period.Id);
                            @Html.Raw(str)
                       }
               },
               @Html.Raw(string.Format("rangeId : {0},", Model))
                   opens: 'left',
                   format: 'MM/dd/yyyy',
                   separator: ' to ',
                   @Html.Raw(string.Format("RangeIdField : {0},",inputFieldName ))        
               },
               function (start, end, id) {
                   $('#reportrange span').html(start.toString('MMMM d, yyyy') + ' - ' + end.toString('MMMM d, yyyy'));
                   var selectorId = "#@inputFieldName";
                   $(selectorId).val(id);
               }
            );
        });
</script>

<h2>Bonded period</h2>
<div class="well">

    <input name="@inputFieldName" id ="@inputFieldName" type="hidden" value="0">
    <div id="reportrange" class="pull-left" style="background: #fff; cursor: pointer; padding: 5px 10px; border: 1px solid #ccc">
        <i class="icon-calendar icon-large"></i>
        <span></span>
        <b class="caret" style="margin-top: 8px"></b>
    </div>
</div>

